name: symfony
base: core20
version: "5.5.1"
summary: The Symfony CLI tool
description: |
  The Symfony binary to develop Symfony applications.
grade: devel
confinement: strict
contact: contact@jeremyfaton.me
website: https://www.jeremyfaton.me

architectures:
  - build-on: arm64
  - build-on: arm
  - build-on: armhf
  - build-on: amd64
  - build-on: i386

parts:
  symfony:
    plugin: go
    source-type: git
    source: https://github.com/symfony-cli/symfony-cli
    build-environment:
      - VERSION: "5.5.1"
      - CHANNEL: dev
    override-build: |
      go mod download
      go install -ldflags="-X main.version=$VERSION -X main.channel=$CHANNEL -linkmode=external" ./...

apps:
  symfony:
    command: bin/symfony-cli
